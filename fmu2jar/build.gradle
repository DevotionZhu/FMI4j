
def debug = false

if (debug) {
    repositories {
        mavenLocal()
//        maven {
//            url "https://oss.sonatype.org/content/repositories/snapshots/" //fmi-import
//        }
    }
}

dependencies {

    compile group: 'commons-io', name: 'commons-io', version: '2.6'
    compile group: 'commons-cli', name: 'commons-cli', version: '1.4'

    compile group: 'no.mechatronics.sfi.fmi4j', name: 'fmi-md', version: '0.4.1'

    if (debug) {
        dependencies {
            testCompile group: 'no.mechatronics.sfi.fmu2jar', name: "ControlledTemperature", "version": "1.0-SNAPSHOT"
        }
    }

    testCompile group: 'junit', name: 'junit', version: '4.12'

}


task fatJar(type: Jar) {
    manifest {
        attributes 'Implementation-Title': 'FMU2Jar',
                'Implementation-Version': "1.0",
                'Main-Class': 'no.mechatronics.sfi.fmu2jar.ApplicationStarter'
    }
    baseName = 'FMU2Jar'
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
    with jar
}

sourceSets {
    test {
        java {
            if (!debug) {
                exclude '**/ControlledTemperatureTest.java'
            }
        }
    }
}

